import{d as se,u as ie,a8 as ne,aj as de,a5 as i,o as C,b as N,j as o,e as a,w as d,t as A,K as ue,B as re,k as R,f as T,s as me,I as ce}from"./entry.b9153a06.js";import pe from"./inputtext.esm.104f294d.js";import ve from"./column.esm.01b3d724.js";import fe from"./splitbutton.esm.4283be6c.js";import _e from"./datatable.esm.9db32825.js";import be from"./multiselect.esm.40f0f93a.js";import{s as he}from"./dropdown.esm.fcdad3b3.js";import ye from"./radiobutton.esm.8e7ae149.js";import ge from"./checkbox.esm.588331ce.js";import{u as $}from"./useMyFetch.1f0d7db9.js";import"./entry.7291cd7f.js";import"./index.esm.83cb8100.js";import"./tieredmenu.esm.3214eac0.js";import"./index.esm.0ebf10cf.js";import"./paginator.esm.10b5c7f9.js";import"./index.esm.8ad36174.js";import"./inputnumber.esm.2f4424d9.js";import"./index.esm.352ce731.js";import"./index.esm.3dd487a1.js";import"./virtualscroller.esm.d0c94242.js";import"./index.esm.ad5e98d3.js";import"./index.esm.a9de877b.js";import"./index.esm.55f9558b.js";import"./index.esm.62cdfcbe.js";import"./index.esm.7ed2c4f1.js";const Ve={class:"card card-sm"},xe={class:"table-header flex justify-content-between flex-wrap"},we={class:"flex align-items-center justify-content-center"},ke={class:"mb-2 mr-3 md:m-0 p-as-md-center"},Ce={class:"hidden lg:flex align-items-center justify-content-center"},Ne={class:"p-input-icon-left mr-2"},Ue=o("i",{class:"pi pi-search"},null,-1),De={class:"field"},Ye=o("label",{for:"role",class:"mb-3"},"Role",-1),Pe={class:"field"},Se=o("label",{for:"parent",class:"mb-3"},"Parent",-1),Re={class:"field"},$e=o("label",{for:"name"},"Name",-1),Me={key:0,class:"p-error"},Le={class:"field"},ze=o("label",{for:"route_name"},"Route Name",-1),Be={class:"formgrid grid"},Ie={class:"field col"},je=o("label",{for:"icon"},"Icon",-1),Ae={class:"field col"},Te=o("label",{for:"order_line"},"Order Line",-1),Fe={class:"formgrid grid"},Ee={class:"field col"},He=o("label",{for:""},"Has Child",-1),Ke={class:"field-radiobutton"},Oe=o("label",{for:"category1"},"Yes",-1),qe={class:"field-radiobutton"},Je=o("label",{for:"category2"},"No",-1),Ge={class:"field col"},Qe=o("label",{for:""},"Is CRUD",-1),We={class:"field-radiobutton"},Xe=o("label",{for:"category1"},"Yes",-1),Ze={class:"field-radiobutton"},el=o("label",{for:"category2"},"No",-1),ll={class:"field"},tl=o("label",{for:""},"Ability",-1),ol={class:"grid"},al={class:"field-checkbox col-3"},sl=o("label",{for:"city1"},"View",-1),il={class:"field-checkbox col-3"},nl=o("label",{for:"city2"},"Store",-1),dl={class:"field-checkbox col-3"},ul=o("label",{for:"city3"},"Update",-1),rl={class:"field-checkbox col-3"},ml=o("label",{for:"city4"},"Delete",-1),cl={class:"confirmation-content"},pl=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),vl={key:0},fl={class:"confirmation-content"},_l=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),bl={key:0},Kl=se({__name:"permission",setup(hl){ie({title:"Master Permissions"}),ne(()=>{f.value=!0,v()});const U=de(),g=i("/api/master/permissions"),M=i("Permission"),m=i("post"),D=i("New "),F=i(),f=i(!1),u=i(!1),b=i(!1),V=i(!1),x=i(!1),n=i(),Y=i(null),l=i({}),P=i(0),h=i(!1),c=i({global:{value:"",matchMode:"contains"}}),L=i([]),z=i([]),E=s=>[{label:"Delete",icon:"pi pi-times",command:()=>{ee(s)}}],p=i({}),v=()=>{f.value=!0,JSON.stringify(p.value),$(g.value,{method:"get",params:p.value}).then(s=>{Y.value=s.data,P.value=s.total,L.value=s.roles,z.value=s.parent,f.value=!1}).catch(s=>{f.value=!1,U.add({severity:"error",summary:s.data.status,detail:s.data.message,life:3e3})})},H=s=>{p.value=s,p.value.filters=c.value.global.value,v()},K=s=>{p.value=s,p.value.filters=c.value.global.value,v()},B=()=>{p.value.filters=c.value.global.value,v()},O=()=>{h.value=n.value.length===P.value},q=()=>{h.value=!1},J=s=>{s.checked?(h.value=!0,n.value=Y.value):(h.value=!1,n.value=[])},G=()=>{l.value={},u.value=!1,b.value=!0,m.value="post",D.value="New ",l.value.index="Y",l.value.has_route="N",l.value.is_crud="N"},Q=()=>{b.value=!1,u.value=!1},W=()=>{u.value=!0,$(m.value==="post"?g.value:g.value+"/"+l.value.id,{method:m.value,body:l.value}).then(s=>{Q(),v()}).catch(s=>{U.add({severity:"error",summary:s.data.status,detail:s.data.message,life:3e3})}).finally(()=>{u.value=!1})},X=s=>{l.value={...s},b.value=!0,m.value="patch",D.value="Edit "},Z=()=>{x.value=!0,m.value="delete"},ee=s=>{l.value={...s},V.value=!0,m.value="delete",n.value=[l.value]},I=()=>{$(g.value+"/0",{method:m.value,body:{selected:n.value}}).then(s=>{x.value=!1,V.value=!1,v()}).catch(s=>{U.add({severity:"error",summary:s.data.status,detail:s.data.message,life:3e3})}).finally(()=>{u.value=!1})},j=s=>{s==="Y"?(l.value.index="Y",l.value.store="Y",l.value.edits="Y",l.value.erase="Y"):(l.value.index="",l.value.store="",l.value.edits="",l.value.erase="")};return(s,e)=>{const _=me,y=pe,r=ve,le=fe,te=_e,oe=be,ae=he,w=ye,k=ge,S=ce;return C(),N("div",null,[o("div",Ve,[a(te,{ref_key:"dt",ref:F,filters:c.value,"onUpdate:filters":e[2]||(e[2]=t=>c.value=t),selection:n.value,"onUpdate:selection":e[3]||(e[3]=t=>n.value=t),value:Y.value,lazy:!0,paginator:!0,rows:10,"data-key":"id","total-records":P.value,loading:f.value,"column-resize-mode":"fit","paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} data","responsive-layout":"scroll",class:"p-datatable-sm p-datatable-no-wrap","select-all":h.value,onPage:e[4]||(e[4]=t=>H(t)),onSort:e[5]||(e[5]=t=>K(t)),onFilter:e[6]||(e[6]=t=>B()),onSelectAllChange:J,onRowSelect:O,onRowUnselect:q},{header:d(()=>[o("div",xe,[o("span",we,[o("h5",ke,A(M.value),1),a(_,{label:"New",icon:"pi pi-plus",class:"p-button-success ml-2 mr-2 p-button-sm",onClick:G}),a(_,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger p-button-sm",disabled:!n.value||!n.value.length,onClick:Z},null,8,["disabled"]),a(_,{label:"Refresh",type:"button",icon:"pi pi-refresh",class:"p-button-sm p-button-info ml-3",loading:f.value,onClick:v},null,8,["loading"])]),o("span",Ce,[o("span",Ne,[Ue,a(y,{modelValue:c.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value.global.value=t),class:"p-inputtext-sm",placeholder:"Search...",onKeydown:e[1]||(e[1]=ue(t=>B(),["enter"]))},null,8,["modelValue"])])])])]),default:d(()=>[a(r,{"selection-mode":"multiple",style:{width:"3rem"},exportable:!1}),a(r,{field:"menu_name",header:"Name",sortable:!0,style:{"min-width":"12rem"}}),a(r,{field:"parent_name",header:"Parent Name",sortable:!0,style:{"min-width":"16rem"}}),a(r,{field:"route_name",header:"Route",sortable:!0,style:{"min-width":"8rem"}}),a(r,{field:"has_child",header:"Has Child",sortable:!0,style:{"min-width":"10rem"}}),a(r,{field:"is_crud",header:"Is CRUD",sortable:!0,style:{"min-width":"12rem"}}),a(r,{field:"order_line",header:"Order Line",sortable:!0,style:{"min-width":"12rem"}}),a(r,{exportable:!1,style:{"min-width":"8rem"}},{body:d(t=>[a(le,{label:"Edit",icon:"pi pi-pencil",model:E(t.data),class:"p-button-sm p-button-success",onClick:yl=>X(t.data)},null,8,["model","onClick"])]),_:1})]),_:1},8,["filters","selection","value","total-records","loading","select-all"])]),a(S,{visible:b.value,"onUpdate:visible":e[23]||(e[23]=t=>b.value=t),style:{width:"450px"},header:D.value+M.value,modal:!0,class:"p-fluid"},{footer:d(()=>[a(_,{label:"Save",icon:"pi pi-check",class:"p-button-sm p-button-success",loading:u.value,onClick:W},null,8,["loading"])]),default:d(()=>[o("div",De,[Ye,a(oe,{id:"role",modelValue:l.value.role,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.role=t),options:L.value,"option-label":"name","option-value":"id",placeholder:"Select Roles",display:"chip",class:"p-inputtext-sm"},null,8,["modelValue","options"])]),o("div",Pe,[Se,a(ae,{id:"parent",modelValue:l.value.parent_name,"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.parent_name=t),options:z.value,editable:!0,"option-label":"name",placeholder:"Select a Parent",class:"p-inputtext-sm"},null,8,["modelValue","options"])]),o("div",Re,[$e,a(y,{id:"name",modelValue:l.value.menu_name,"onUpdate:modelValue":e[9]||(e[9]=t=>l.value.menu_name=t),modelModifiers:{trim:!0},required:"true",autofocus:"",class:re({"p-invalid":u.value&&!l.value.menu_name}+" p-inputtext-sm")},null,8,["modelValue","class"]),u.value&&!l.value.menu_name?(C(),N("small",Me,"Name is required.")):R("",!0)]),o("div",Le,[ze,a(y,{id:"route_name",modelValue:l.value.route_name,"onUpdate:modelValue":e[10]||(e[10]=t=>l.value.route_name=t),modelModifiers:{trim:!0},class:"p-inputtext-sm"},null,8,["modelValue"])]),o("div",Be,[o("div",Ie,[je,a(y,{id:"icon",modelValue:l.value.icon,"onUpdate:modelValue":e[11]||(e[11]=t=>l.value.icon=t),class:"p-inputtext-sm"},null,8,["modelValue"])]),o("div",Ae,[Te,a(y,{id:"order_line",modelValue:l.value.order_line,"onUpdate:modelValue":e[12]||(e[12]=t=>l.value.order_line=t),class:"p-inputtext-sm"},null,8,["modelValue"])])]),o("div",Fe,[o("div",Ee,[He,o("div",Ke,[a(w,{id:"category1",modelValue:l.value.has_child,"onUpdate:modelValue":e[13]||(e[13]=t=>l.value.has_child=t),name:"Yes",value:"Y"},null,8,["modelValue"]),Oe]),o("div",qe,[a(w,{id:"category2",modelValue:l.value.has_child,"onUpdate:modelValue":e[14]||(e[14]=t=>l.value.has_child=t),name:"No",value:"N"},null,8,["modelValue"]),Je])]),o("div",Ge,[Qe,o("div",We,[a(w,{id:"category1",modelValue:l.value.is_crud,"onUpdate:modelValue":e[15]||(e[15]=t=>l.value.is_crud=t),name:"Yes",value:"Y",onClick:e[16]||(e[16]=t=>j("Y"))},null,8,["modelValue"]),Xe]),o("div",Ze,[a(w,{id:"category2",modelValue:l.value.is_crud,"onUpdate:modelValue":e[17]||(e[17]=t=>l.value.is_crud=t),name:"No",value:"N",onClick:e[18]||(e[18]=t=>j("N"))},null,8,["modelValue"]),el])])]),o("div",ll,[tl,o("div",ol,[o("div",al,[a(k,{modelValue:l.value.index,"onUpdate:modelValue":e[19]||(e[19]=t=>l.value.index=t),"input-id":"city1",value:"Y"},null,8,["modelValue"]),sl]),o("div",il,[a(k,{modelValue:l.value.store,"onUpdate:modelValue":e[20]||(e[20]=t=>l.value.store=t),"input-id":"city2",value:"Y"},null,8,["modelValue"]),nl]),o("div",dl,[a(k,{modelValue:l.value.edits,"onUpdate:modelValue":e[21]||(e[21]=t=>l.value.edits=t),"input-id":"city3",value:"Y"},null,8,["modelValue"]),ul]),o("div",rl,[a(k,{modelValue:l.value.erase,"onUpdate:modelValue":e[22]||(e[22]=t=>l.value.erase=t),"input-id":"city4",value:"Y"},null,8,["modelValue"]),ml])])])]),_:1},8,["visible","header"]),a(S,{visible:V.value,"onUpdate:visible":e[24]||(e[24]=t=>V.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[a(_,{label:"Yes",icon:"pi pi-check",class:"p-button-sm p-button-success",onClick:I})]),default:d(()=>[o("div",cl,[pl,l.value?(C(),N("span",vl,[T("Are you sure you want to delete "),o("b",null,A(l.value.name),1),T("?")])):R("",!0)])]),_:1},8,["visible"]),a(S,{visible:x.value,"onUpdate:visible":e[25]||(e[25]=t=>x.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[a(_,{label:"Yes",icon:"pi pi-check",class:"p-button-sm p-button-success",onClick:I})]),default:d(()=>[o("div",fl,[_l,l.value?(C(),N("span",bl,"Are you sure you want to delete the selected data?")):R("",!0)])]),_:1},8,["visible"])])}}});export{Kl as default};
