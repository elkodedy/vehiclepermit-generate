import{V as D,b,j as t,e as d,w as l,s as T,o as r,f as m,B as h,t as o,g as u,k as c,ae as C,af as P,ag as R}from"./entry.b9153a06.js";import z from"./divider.esm.19f909ac.js";import N from"./column.esm.01b3d724.js";import B from"./datatable.esm.9db32825.js";import{u as F}from"./useMyFetch.1f0d7db9.js";import{i as I}from"./fp.esm.31497e30.js";import{_ as L}from"./_plugin-vue_export-helper.c27b6911.js";import"./entry.7291cd7f.js";import"./basecomponent.esm.482e346f.js";import"./paginator.esm.10b5c7f9.js";import"./index.esm.8ad36174.js";import"./dropdown.esm.fcdad3b3.js";import"./index.esm.83cb8100.js";import"./virtualscroller.esm.d0c94242.js";import"./inputnumber.esm.2f4424d9.js";import"./index.esm.352ce731.js";import"./index.esm.3dd487a1.js";import"./inputtext.esm.104f294d.js";import"./index.esm.0ebf10cf.js";import"./index.esm.ad5e98d3.js";import"./index.esm.a9de877b.js";import"./index.esm.55f9558b.js";import"./index.esm.62cdfcbe.js";const S={data(){return{permits:null,permitDialog:!1,deletePermitDialog:!1,deletePermitsDialog:!1,permit:{},selectedPermits:null,filters:{},statuses:[{label:"Pending"},{label:"Approved"},{label:"Rejected"},{label:"Closed"}],types:[{label:""},{label:"Barang Masuk",icon:"pi-sign-in",color:"text-green-400"},{label:"Barang Keluar",icon:"pi-sign-out",color:"text-yellow-400"}],expandedRows:null,showTable:!1,lgDeviceWidth:1024,activeTenantcode:localStorage.getItem("vehiclepermit.active-tenant-code")}},created(){this.initFilters()},async mounted(){this.loadData(),this.onResize(),this.$nextTick(()=>{window.addEventListener("resize",this.onResize)})},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{async loadData(){const n=await this.getFingerPrint();await F("/api/get-permits-local",{method:"POST",params:{prmt_fingerprint_id:n,active_tenant_code:this.activeTenantcode}}).then(i=>{this.permits=i.data})},initFilters(){this.filters={global:{value:null,matchMode:D.CONTAINS}}},onResize(){this.showTable=window.innerWidth>=this.lgDeviceWidth},toForm(){this.$router.push("/permits/add")},async getFingerPrint(){return(await(await I.load({monitoring:!1})).get()).visitorId}}};const a=n=>(C("data-v-56e2f009"),n=n(),P(),n),M={class:"grid mt-2"},O={class:"col-12"},V={class:"card"},j={class:"card-title grid"},E=a(()=>t("h5",{class:"mt-3 mb-0 font-bold text-gray-600"}," Dokumen Izin Barang Masuk/Keluar ",-1)),J={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},W={class:"flex"},A={class:"col-5"},K=a(()=>t("span",{class:"p-column-title"},"Nomor Dokumen",-1)),U=a(()=>t("br",null,null,-1)),q=a(()=>t("span",{class:"p-column-title"},"Jenis",-1)),G=a(()=>t("span",{class:"p-column-title"},"Nama Pemohon",-1)),H=a(()=>t("span",{class:"p-column-title"},"Perusahaan Pemohon",-1)),Q=a(()=>t("span",{class:"p-column-title"},"Dibuat Oleh",-1)),X={class:"p-column-title"},Y={class:"pl-5"},Z={style:{width:"100%"}},$=a(()=>t("th",null,"Jenis",-1)),ee=a(()=>t("th",null,"Pemohon",-1)),te=a(()=>t("th",null,"Perusahaan",-1)),se=a(()=>t("th",null,"Dibuat Oleh",-1)),oe={colspan:"2"};function ie(n,i,y,f,s,g){const _=T,w=z,v=R,p=N,k=B;return r(),b("div",M,[t("div",O,[t("div",V,[t("div",j,[E,d(_,{class:"ml-auto",icon:"pi pi-times",rounded:"",severity:"secondary",outlined:"",text:"",onClick:i[0]||(i[0]=e=>n.$router.push("/permits@"+s.activeTenantcode))}),d(w)]),d(v),d(k,{ref:"dt",selection:s.selectedPermits,"onUpdate:selection":i[2]||(i[2]=e=>s.selectedPermits=e),expandedRows:s.expandedRows,"onUpdate:expandedRows":i[3]||(i[3]=e=>s.expandedRows=e),value:s.permits,"data-key":"id_prmt",paginator:!0,rows:10,filters:s.filters,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} permits","responsive-layout":"scroll"},{header:l(()=>[t("div",J,[t("div",W,[t("div",A,[d(_,{label:"Form Baru",icon:"pi pi-plus",severity:"secondary",outlined:"",size:"small",style:{width:"100px"},onClick:i[1]||(i[1]=e=>g.toForm())})])])])]),expansion:l(e=>[t("div",Y,[t("table",Z,[t("tr",null,[$,t("td",null,[m(" : "),t("strong",null,[t("i",{class:h(`pi mr-2 ${s.types[e.data.prmt_type].icon} ${s.types[e.data.prmt_type].color}`)},null,2)]),m(" "+o(s.types[e.data.prmt_type].label),1)])]),t("tr",null,[ee,t("td",null,": "+o(e.data.prmt_name),1)]),t("tr",null,[te,t("td",null,": "+o(e.data.prmt_company),1)]),t("tr",null,[se,t("td",null,": "+o(e.data.prmt_insert_by),1)]),t("tr",null,[t("td",oe,[d(_,{label:"Detail",icon:"pi pi-pencil",class:"py-2 mt-2 w-100 detail-button",size:"small",severity:"secondary",outlined:"",onClick:x=>n.$router.push("/permits/detail@"+e.data.prmt_url_code)},null,8,["onClick"])])])])])]),default:l(()=>[s.showTable?c("",!0):(r(),u(p,{key:0,expander:"",class:"px-1",style:{width:"10px"}})),d(p,{field:"prmt_number",header:"Nomor Dokumen",sortable:!0},{body:l(e=>[K,m(" "+o(e.data.prmt_number)+" ",1),U,s.showTable?c("",!0):(r(),b("span",{key:0,class:h(`permit-badge status-${s.statuses[e.data.prmt_status].label?s.statuses[e.data.prmt_status].label.toLowerCase():""}`)},o(s.statuses[e.data.prmt_status].label),3))]),_:1}),s.showTable?(r(),u(p,{key:1,field:"type",header:"Jenis",sortable:!0},{body:l(e=>[q,t("strong",null,[t("i",{class:h(`pi font- mr-2 ${s.types[e.data.prmt_type].icon} ${s.types[e.data.prmt_type].color}`)},null,2)]),m(" "+o(s.types[e.data.prmt_type].label),1)]),_:1})):c("",!0),s.showTable?(r(),u(p,{key:2,field:"name",header:"Nama Pemohon",sortable:!0},{body:l(e=>[G,m(" "+o(e.data.prmt_name),1)]),_:1})):c("",!0),s.showTable?(r(),u(p,{key:3,field:"company",header:"Perusahaan Pemohon",sortable:!0},{body:l(e=>[H,m(" "+o(e.data.prmt_company),1)]),_:1})):c("",!0),s.showTable?(r(),u(p,{key:4,field:"prmt_insert_by",header:"Dibuat Oleh",sortable:!0},{body:l(e=>[Q,m(" "+o(e.data.prmt_insert_by),1)]),_:1})):c("",!0),s.showTable?(r(),u(p,{key:5,field:"prmt_status",header:"Status",sortable:!0},{body:l(e=>[t("span",X,"Status "+o(e.data),1),t("span",{class:h(`permit-badge status-${s.statuses[e.data.prmt_status].label?s.statuses[e.data.prmt_status].label.toLowerCase():""}`)},o(s.statuses[e.data.prmt_status].label),3)]),_:1})):c("",!0),s.showTable?(r(),u(p,{key:6},{body:l(e=>[d(_,{label:"Detail",icon:"pi pi-pencil",class:"mr-2 detail-button",size:"small",severity:"secondary",outlined:"",onClick:x=>n.$router.push("/permits/detail@"+e.data.prmt_url_code)},null,8,["onClick"])]),_:1})):c("",!0)]),_:1},8,["selection","expandedRows","value","filters"])])])])}const Re=L(S,[["render",ie],["__scopeId","data-v-56e2f009"]]);export{Re as default};
