import{ad as R,b as v,j as t,e as _,w as c,f as d,t as n,B as k,F as T,i as I,s as N,o as a,g,k as u,G as P,ae as S,af as U}from"./entry.b9153a06.js";import W from"./divider.esm.19f909ac.js";import B from"./inlinemessage.esm.16c707bc.js";import L from"./column.esm.01b3d724.js";import D from"./datatable.esm.9db32825.js";import z from"./galleria.esm.73618c8a.js";import{u as E}from"./useMyFetch.1f0d7db9.js";import{S as J}from"./sweetalert.min.c91536f3.js";import{i as V}from"./fp.esm.31497e30.js";import{_ as j}from"./_plugin-vue_export-helper.c27b6911.js";import"./entry.7291cd7f.js";import"./basecomponent.esm.482e346f.js";import"./paginator.esm.10b5c7f9.js";import"./index.esm.8ad36174.js";import"./dropdown.esm.fcdad3b3.js";import"./index.esm.83cb8100.js";import"./virtualscroller.esm.d0c94242.js";import"./inputnumber.esm.2f4424d9.js";import"./index.esm.352ce731.js";import"./index.esm.3dd487a1.js";import"./inputtext.esm.104f294d.js";import"./index.esm.0ebf10cf.js";import"./index.esm.ad5e98d3.js";import"./index.esm.a9de877b.js";import"./index.esm.55f9558b.js";import"./index.esm.62cdfcbe.js";import"./index.esm.5ee52e62.js";import"./index.esm.83df8d55.js";const F={data(){return{permit:{},statuses:[{label:"Pending"},{label:"Approved"},{label:"Rejected"},{label:"Closed"}],status:0,company:"",types:[{label:""},{label:"Barang Masuk",icon:"pi-sign-in",color:"text-green-500"},{label:"Barang Keluar",icon:"pi-sign-out",color:"text-yellow-500"}],type:0,imageLength:0,expandedRows:null,itemExpandedRows:null,showTable:!1,lgDeviceWidth:1024,route:R().params,images:[],activeIndex:0,responsiveOptions:[{breakpoint:"1024px",numVisible:5},{breakpoint:"768px",numVisible:3},{breakpoint:"560px",numVisible:1}],displayCustom:!1,fullUrl:window.location.href}},mounted(){this.showTable=window.innerWidth>=this.lgDeviceWidth,this.$nextTick(()=>{window.addEventListener("resize",this.onResize)}),this.loadData()},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{async loadData(){await this.getFingerPrint(),await E("/api/itempermithd/"+this.route.id,{params:{displayAll:!1}}).then(i=>{console.log(i),i||this.$router.push("/"),this.permit=i.data,this.status=this.permit.prmt_status,this.type=this.permit.prmt_type,this.imageLength=this.permit.image.length;for(let l=0;l<i.image.length;l++){const p=i.image[l].base64,m=i.image[l].img_filename,s=this.base64ToImage(p,m);this.imageUrl=URL.createObjectURL(s),this.images[l]={blob:this.imageUrl}}}).catch(i=>{this.submitted=!0,J("Error!",i.data.message,"error").then(()=>this.$router.push("/"))})},onResize(){this.showTable=window.innerWidth>=this.lgDeviceWidth},copyUrl(){const i=document.createElement("textarea");i.value=this.fullUrl,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),this.$toast.add({severity:"success",summary:"Berhasil!",detail:"URL berhasil disalin!",life:3e3})},printPage(){const l=`/permits/pdf@${this.route.id}`,p=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,m=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=810,h=600,y=(p-s)/2,f=(m-h)/2;window.open(l,"_blank",`width=${s},height=${h},left=${y},top=${f}`).focus()},savePage(){const l=`/permits/save@${this.route.id}`;window.open(l,"_blank").focus()},imageClick(i){this.activeIndex=i,this.displayCustom=!0},base64ToImage(i,l){const p=i.split(";")[0].split(":")[1],m=atob(i.split(",")[1]),s=[];for(let b=0;b<m.length;b++)s.push(m.charCodeAt(b));const h=new Uint8Array(s),y=new Blob([h],{type:p});return new File([y],l,{type:p})},async getFingerPrint(){return(await(await V.load({monitoring:!1})).get()).visitorId}}},e=i=>(S("data-v-e587874e"),i=i(),U(),i),K={class:"grid mt-2"},A={class:"col-12"},H={class:"card"},q={class:"card-title grid"},O=e(()=>t("h5",{class:"mt-3 mb-0 font-bold text-gray-600"},"Detail Form",-1)),M={class:"grid"},G={class:"grid formgrid col-12"},Q={class:"col-12 mb-3"},X={class:"flex align-items-center"},Y=e(()=>t("div",{class:"ml-2"},"Simpan URL halaman ini untuk kembali mengakses formulir.",-1)),Z=e(()=>t("div",{class:"col-12 mb-3"},[t("strong",{class:"text-gray-700"},"Dokumen")],-1)),$={class:"col-12 mb-2 lg:mb-0 grid"},tt=e(()=>t("p",{class:"col-5 lg:col-4"},"Nomor",-1)),st={class:"col-7 lg:col-7"},et=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),ot={class:"col-12 mb-2 lg:mb-0 grid"},it=e(()=>t("p",{class:"col-5 lg:col-4"},"Jenis",-1)),lt={class:"col-7 lg:col-7"},nt=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),ct={class:"col-12 mb-2 lg:mb-0 grid"},at=e(()=>t("p",{class:"col-5 lg:col-4"},"Tanggal",-1)),dt={class:"col-7 lg:col-7"},rt=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),_t={class:"grid formgrid col-12 lg:col-6"},pt=e(()=>t("div",{class:"col-12 mb-3"},[t("strong",{class:"text-gray-700"},"Pengajuan")],-1)),mt={class:"col-12 mb-2 lg:mb-0 grid"},ht=e(()=>t("p",{class:"col-5 lg:col-4"},"Status",-1)),gt={class:"col-7 lg:col-7"},ut=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),yt={class:"col-12 mb-2 lg:mb-0 grid"},bt=e(()=>t("p",{class:"col-5 lg:col-4"},"Total Barang",-1)),vt={class:"col-7 lg:col-7"},ft=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),wt={class:"col-12 mb-2 lg:mb-0 grid"},xt=e(()=>t("p",{class:"col-5 lg:col-4"},"Tanggal Pengajuan",-1)),kt={class:"col-7 lg:col-7"},Ct=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),Rt={class:"grid formgrid col-12"},Tt=e(()=>t("div",{class:"col-12 mb-3"},[t("strong",{class:"text-gray-700"},"Pemohon")],-1)),It={class:"grid col-12"},Nt={class:"col-12 lg:col-6"},Pt={class:"col-12 mb-2 lg:mb-0 grid"},St=e(()=>t("p",{class:"col-5 lg:col-4"},"NIK",-1)),Ut={class:"col-7 lg:col-7"},Wt=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),Bt={class:"col-12 mb-2 lg:mb-0 grid"},Lt=e(()=>t("p",{class:"col-5 lg:col-4"},"Nama",-1)),Dt={class:"col-7 lg:col-7"},zt=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),Et={class:"col-12 mb-2 lg:mb-0 grid"},Jt=e(()=>t("p",{class:"col-5 lg:col-4"},"Perusahaan",-1)),Vt={class:"col-7 lg:col-7"},jt=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),Ft={class:"col-12 lg:col-6"},Kt={class:"col-12 mb-2 lg:mb-0 grid"},At=e(()=>t("p",{class:"col-5 lg:col-4"},"Departemen",-1)),Ht={class:"col-7 lg:col-7"},qt=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),Ot={class:"col-12 mb-2 lg:mb-0 grid"},Mt=e(()=>t("p",{class:"col-5 lg:col-4"},"Jabatan",-1)),Gt={class:"col-7 lg:col-7"},Qt=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),Xt={class:"col-12 mb-2 lg:mb-0 grid"},Yt=e(()=>t("p",{class:"col-5 lg:col-4"},"No Handphone",-1)),Zt={class:"col-7 lg:col-7"},$t=e(()=>t("span",{style:{"margin-left":"-6px"}},":",-1)),ts={class:"grid formgrid col-12 mb-3"},ss=e(()=>t("div",{class:"col-12"},[t("strong",{class:"text-gray-700"},"Kendaraan")],-1)),es={class:"col-12"},os=e(()=>t("span",{class:"p-column-title"},"Nomor Polisi",-1)),is={class:"text-gray-700"},ls=e(()=>t("span",{class:"p-column-title"},"Jenis Kendaraan",-1)),ns={class:"text-gray-700"},cs=e(()=>t("span",{class:"p-column-title"},"Nama Pengemudi",-1)),as={class:"text-gray-700"},ds=e(()=>t("span",{class:"p-column-title"},"Nama Penumpang",-1)),rs={class:"text-gray-700"},_s={class:""},ps={style:{width:"100%"}},ms={border:"1"},hs=e(()=>t("td",null,"Jenis Kendaraan",-1)),gs=e(()=>t("td",null,"Nama Pengemudi",-1)),us=e(()=>t("td",null,"Nama Penumpang",-1)),ys={class:"grid formgrid col-12 mb-3"},bs=e(()=>t("div",{class:"col-12"},[t("strong",{class:"text-gray-700"},"Barang")],-1)),vs={class:"col-12"},fs=e(()=>t("span",{class:"p-column-title"},"Nama Barang",-1)),ws={class:"text-gray-700"},xs=e(()=>t("span",{class:"p-column-title"},"Satuan",-1)),ks={class:"text-gray-700"},Cs=e(()=>t("span",{class:"p-column-title"},"Jumlah",-1)),Rs={class:"text-gray-700"},Ts=e(()=>t("span",{class:"p-column-title"},"Catatan",-1)),Is={class:"text-gray-700"},Ns={class:""},Ps={style:{width:"100%"}},Ss={border:"1"},Us=e(()=>t("td",null,"Satuan",-1)),Ws=e(()=>t("td",null,"Jumlah",-1)),Bs=e(()=>t("td",null,"Catatan",-1)),Ls={class:"grid formgrid col-12"},Ds=e(()=>t("div",{class:"col-12 mb-2"},[t("strong",{class:"text-gray-700"},"Lampiran")],-1)),zs={key:0,class:"col-12 grid justify-content-center"},Es={class:"card p-2"},Js=["src","alt"],Vs={class:"mt-3 grid col-12"},js=["onClick"],Fs={key:1,class:"ml-3 text-gray-600"},Ks=e(()=>t("i",null,"- Lampiran Kosong -",-1)),As=[Ks],Hs={class:"text-center mt-4"};function qs(i,l,p,m,s,h){const y=N,f=W,b=B,r=L,w=D,C=z;return a(),v("div",K,[t("div",A,[t("div",H,[t("div",q,[O,_(y,{class:"ml-auto",icon:"pi pi-times",rounded:"",severity:"secondary",outlined:"",text:"",onClick:l[0]||(l[0]=o=>i.$router.push("/permits"))}),_(f)]),t("div",M,[t("div",G,[t("div",Q,[_(b,{style:{border:"solid #696cff",borderWidth:"0 0 0 6px",color:"#696cff"},severity:"info",class:"border-primary w-full justify-content-start"},{default:c(()=>[t("div",X,[Y,_(y,{label:"Salin URL",class:"ml-2",icon:"pi pi-copy",severity:"secondary",outlined:"",size:"small",onClick:l[1]||(l[1]=o=>h.copyUrl())})])]),_:1})]),Z,t("div",$,[tt,t("p",st,[et,d(" "+n(s.permit.prmt_number),1)])]),t("div",ot,[it,t("p",lt,[nt,t("strong",null,[t("i",{class:k(`pi font-bold mx-2 ${s.types[s.type].icon} ${s.types[s.type].color}`)},null,2)]),d(" "+n(s.types[s.type].label),1)])]),t("div",ct,[at,t("p",dt,[rt,d(" "+n(s.permit.prmt_request_date),1)])])]),t("div",_t,[pt,t("div",mt,[ht,t("p",gt,[ut,t("span",{class:k(`ml-1 permit-badge status-${s.statuses[s.status].label.toLowerCase()}`)},n(s.statuses[s.status].label),3)])]),t("div",yt,[bt,t("p",vt,[ft,d(" "+n(s.permit.prmt_total_item),1)])]),t("div",wt,[xt,t("p",kt,[Ct,d(" "+n(s.permit.prmt_request_date),1)])])]),t("div",Rt,[Tt,t("div",It,[t("div",Nt,[t("div",Pt,[St,t("p",Ut,[Wt,d(" "+n(s.permit.prmt_nik),1)])]),t("div",Bt,[Lt,t("p",Dt,[zt,d(" "+n(s.permit.prmt_name),1)])]),t("div",Et,[Jt,t("p",Vt,[jt,d(" "+n(s.permit.prmt_company),1)])])]),t("div",Ft,[t("div",Kt,[At,t("p",Ht,[qt,d(" "+n(s.permit.prmt_dept),1)])]),t("div",Ot,[Mt,t("p",Gt,[Qt,d(" "+n(s.permit.prmt_position),1)])]),t("div",Xt,[Yt,t("p",Zt,[$t,d(" "+n(s.permit.prmt_phone),1)])])])])]),t("div",ts,[ss,t("div",es,[_(w,{ref:"dt",expandedRows:s.expandedRows,"onUpdate:expandedRows":l[2]||(l[2]=o=>s.expandedRows=o),value:s.permit.vehicle,"responsive-layout":"scroll","data-key":"id_vhcl"},{expansion:c(o=>[t("div",_s,[t("table",ps,[t("tr",ms,[hs,t("td",null,": "+n(o.data.vhcl_type),1)]),t("tr",null,[gs,t("td",null,": "+n(o.data.vhcl_driver),1)]),t("tr",null,[us,t("td",null,": "+n(o.data.vhcl_pasenger),1)])])])]),default:c(()=>[s.showTable?u("",!0):(a(),g(r,{key:0,class:"py-1",expander:"",style:{width:"10px"}})),_(r,{class:"py-1",field:"vhcl_number",header:"Nomor Polisi"},{body:c(o=>[os,t("strong",is,n(o.data.vhcl_number),1)]),_:1}),s.showTable?(a(),g(r,{key:1,class:"py-1",field:"vhcl_type",header:"Jenis Kendaraan"},{body:c(o=>[ls,t("span",ns,n(o.data.vhcl_type),1)]),_:1})):u("",!0),s.showTable?(a(),g(r,{key:2,class:"py-1",field:"vhcl_driver",header:"Nama Pengemudi"},{body:c(o=>[cs,t("span",as,n(o.data.vhcl_driver),1)]),_:1})):u("",!0),s.showTable?(a(),g(r,{key:3,class:"py-1",field:"vhcl_pasenger",header:"Nama Penumpang"},{body:c(o=>[ds,t("span",rs,n(o.data.vhcl_pasenger),1)]),_:1})):u("",!0)]),_:1},8,["expandedRows","value"])])]),t("div",ys,[bs,t("div",vs,[_(w,{ref:"dt",expandedRows:s.itemExpandedRows,"onUpdate:expandedRows":l[3]||(l[3]=o=>s.itemExpandedRows=o),value:s.permit.dt,"data-key":"id_prmt_item","responsive-layout":"scroll"},{expansion:c(o=>[t("div",Ns,[t("table",Ps,[t("tr",Ss,[Us,t("td",null,": "+n(o.data.prmt_unit??"-"),1)]),t("tr",null,[Ws,t("td",null,": "+n(o.data.prmt_qty??"-"),1)]),t("tr",null,[Bs,t("td",null,": "+n(o.data.prmt_note??"-"),1)])])])]),default:c(()=>[s.showTable?u("",!0):(a(),g(r,{key:0,class:"py-1",expander:"",style:{width:"10px"}})),_(r,{class:"py-1",field:"prmt_item",header:"Nama Barang"},{body:c(o=>[fs,t("strong",ws,n(o.data.prmt_item),1)]),_:1}),s.showTable?(a(),g(r,{key:1,class:"py-1",field:"prmt_unit",header:"Satuan"},{body:c(o=>[xs,t("span",ks,n(o.data.prmt_unit),1)]),_:1})):u("",!0),s.showTable?(a(),g(r,{key:2,class:"py-1",field:"prmt_qty",header:"Jumlah"},{body:c(o=>[Cs,t("span",Rs,n(o.data.prmt_qty),1)]),_:1})):u("",!0),s.showTable?(a(),g(r,{key:3,class:"py-1",field:"prmt_note",header:"Catatan"},{body:c(o=>[Ts,t("span",Is,n(o.data.prmt_note),1)]),_:1})):u("",!0)]),_:1},8,["expandedRows","value"])])]),t("div",Ls,[Ds,s.images.length?(a(),v("div",zs,[_(C,{activeIndex:s.activeIndex,"onUpdate:activeIndex":l[4]||(l[4]=o=>s.activeIndex=o),visible:s.displayCustom,"onUpdate:visible":l[5]||(l[5]=o=>s.displayCustom=o),value:s.images,responsiveOptions:s.responsiveOptions,numVisible:7,containerStyle:"max-width: 850px; z-index: 2210 !important",circular:!0,fullScreen:!0,showItemNavigators:!0,showThumbnails:!1},{item:c(o=>[t("div",Es,[t("img",{src:`${o.item.blob}`,alt:o.item.blob,style:{width:"100%",display:"block"}},null,8,Js)])]),_:1},8,["activeIndex","visible","value","responsiveOptions"]),t("div",Vs,[(a(!0),v(T,null,I(s.images,(o,x)=>(a(),v("div",{key:x,class:"col-4"},[t("div",{class:"card p-0",style:P({height:"120px",overflow:"hidden",backgroundImage:"url("+o.blob+")",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}),onClick:Os=>h.imageClick(x)},null,12,js)]))),128))])])):(a(),v("div",Fs,As))])]),t("div",Hs,[_(y,{class:"mx-1",label:"Cetak Dokumen",icon:"pi pi-print",severity:"secondary",size:"small",outlined:"",style:{width:"auto"},onClick:l[6]||(l[6]=o=>h.printPage())})])])])])}const we=j(F,[["render",qs],["__scopeId","data-v-e587874e"]]);export{we as default};
