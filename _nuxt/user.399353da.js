import{d as Ve,u as Se,aa as Ue,al as we,a9 as s,an as _,o as r,b as p,j as i,e as l,w as n,t as c,K as M,B as k,F as xe,i as Ce,g as B,f as G,k as X,V as f,s as De,I as Ae}from"./entry.600128a6.js";import Ne from"./inputtext.esm.cb76cc36.js";import Ee from"./column.esm.01b3d724.js";import{s as Le}from"./dropdown.esm.588565e7.js";import $e from"./chip.esm.4cbc1096.js";import Me from"./tag.esm.090bb7d7.js";import Re from"./splitbutton.esm.cd2e9f82.js";import Ke from"./datatable.esm.d6f880f9.js";import Qe from"./multiselect.esm.1c913110.js";import"./entry.ea737ec0.js";import"./index.esm.f9d0898b.js";import"./virtualscroller.esm.bdad7ed0.js";import"./tieredmenu.esm.a45b1b50.js";import"./index.esm.db37d01a.js";import"./paginator.esm.05a18373.js";import"./index.esm.ebc9a441.js";import"./inputnumber.esm.28c88c11.js";import"./index.esm.15b9ae17.js";import"./index.esm.ae9c0163.js";import"./index.esm.72b26b0f.js";import"./index.esm.3548db4d.js";import"./index.esm.437957f1.js";import"./index.esm.ada9b1c7.js";import"./index.esm.d39a7516.js";const ze={class:"card card-sm"},Be={class:"table-header flex justify-content-between flex-wrap"},Fe={class:"flex align-items-center justify-content-center"},Oe={class:"mb-2 mr-3 md:m-0 p-as-md-center"},Te={class:"align-items-center justify-content-center hidden lg:flex"},Ie={class:"p-input-icon-left mr-2"},Ye=i("i",{class:"pi pi-search"},null,-1),je={key:1},Je={key:1},We={key:1},He={class:"field"},qe=i("label",{for:"inventoryStatus",class:"mb-3"},"Username",-1),Ge={key:0},Xe={key:1},Ze={class:"field"},Pe=i("label",{for:"role",class:"mb-3"},"Role",-1),ea={class:"field"},aa=i("label",{for:"inventoryStatus",class:"mb-3"},"Active",-1),ta={key:0},la={key:1},oa={class:"confirmation-content"},sa=i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),na={key:0},ua={class:"confirmation-content"},ia=i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),da={key:0},Ra=Ve({__name:"user",setup(ra){Se({title:"Master User"}),Ue(()=>{S.value=!0,y(),oe(),se(),ne()});const A=we(),V=s("/api/master/user"),F=s("User"),h=s("post"),R=s("New "),Z=s(),S=s(!1),N=s(!1),g=s(!1),U=s(!1),E=s(!1),L=s(!1),m=s(),K=s(null),O=s([]),T=s([]),P=s([]),I=s([]),ee=s([]),Y=s([]),j=s([]),o=s({}),Q=s(0),w=s(!1),x=s({global:{value:"",matchMode:"contains"},username:{value:null,matchMode:f.EQUALS},title:{value:null,matchMode:f.EQUALS},name:{value:null,matchMode:f.EQUALS},company:{value:null,matchMode:f.EQUALS},department:{value:null,matchMode:f.EQUALS},position:{value:null,matchMode:f.EQUALS},email:{value:null,matchMode:f.EQUALS},role_name:{value:null,matchMode:f.EQUALS},active:{value:null,matchMode:f.EQUALS}}),ae=s([{label:"Y",value:"Y"},{label:"N",value:"N"}]),te=a=>[{label:"Edit",icon:"pi pi-refresh",command:()=>{W(a)}},{label:"Delete",icon:"pi pi-times",command:()=>{he(a)}}],$=s({}),y=()=>{S.value=!0,_(V.value,{method:"get",params:{options:JSON.stringify($.value)}}).then(a=>{K.value=a.data,T.value=a.role,I.value=a.department,ee.value=a.position,Y.value=a.company,Q.value=a.total,S.value=!1}).catch(a=>{S.value=!1,A.add({severity:"error",summary:a.data.status,detail:a.data.message,life:3e3})})},le=()=>{N.value=!0,_(V.value+"-sync",{method:"post"}).then(a=>{N.value=!1,y()}).catch(a=>{N.value=!1,A.add({severity:"error",summary:a.data.status,detail:a.data.message,life:3e3})})},oe=()=>{_("/api/master/employees",{params:{company:"IMIP",workLocation:"MOROWALI"}}).then(a=>{O.value=a.data})},se=()=>{_("/api/master/roles",{params:{displayAll:!0}}).then(a=>{j.value=a.data})},ne=()=>{_("/api/master/division",{params:{displayAll:!0}}).then(a=>{P.value=a.data})},ue=a=>{$.value=a,y()},ie=a=>{$.value=a,y()},de=()=>{$.value.filters=JSON.stringify(x.value),y()},re=()=>{w.value=m.value.length===Q.value},ce=()=>{w.value=!1},pe=a=>{a.checked?(w.value=!0,m.value=K.value):(w.value=!1,m.value=[])},me=()=>{o.value={},o.value.NameNik="",g.value=!1,U.value=!0,h.value="post",R.value="New "},ve=()=>{U.value=!1,g.value=!1},fe=()=>{g.value=!0,_(h.value==="post"?V.value:V.value+"/"+o.value.id,{method:h.value,body:o.value}).then(a=>{ve(),y()}).catch(a=>{A.add({severity:"error",summary:a.data.status,detail:a.data.message,life:3e3})}).finally(()=>{g.value=!1})},J=()=>{const a=o.value.employee;o.value.name=a.Name,o.value.username=a.Nik,o.value.company=a.Company,o.value.company_code=a.CompanyCode,o.value.department=a.Department,o.value.location=a.WorkLocation,o.value.email=a.OfficeEmailAddress?a.OfficeEmailAddress:a.PrivateEmailAddress,o.value.employee_code=a.EmployeeCode,o.value.position=a.JobPosition},W=a=>{o.value={...a},U.value=!0,h.value="patch",R.value="Edit "},ye=()=>{L.value=!0,h.value="delete"},he=a=>{o.value=a,E.value=!0,h.value="delete",m.value=[o.value]},H=()=>{_(V.value+"/0",{method:h.value,body:{selected:m.value}}).then(a=>{L.value=!1,E.value=!1,y()}).catch(a=>{A.add({severity:"error",summary:a.data.status,detail:a.data.message,life:3e3})}).finally(()=>{g.value=!1})};return(a,u)=>{const b=De,C=Ne,v=Ee,D=Le,be=$e,q=Me,_e=Re,ge=Ke,ke=Qe,z=Ae;return r(),p("div",null,[i("div",ze,[l(ge,{ref_key:"dt",ref:Z,filters:x.value,"onUpdate:filters":u[1]||(u[1]=e=>x.value=e),selection:m.value,"onUpdate:selection":u[2]||(u[2]=e=>m.value=e),value:K.value,lazy:!0,paginator:!0,rows:10,"data-key":"id","total-records":Q.value,loading:S.value,"filter-display":"menu","column-resize-mode":"fit","paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} data","responsive-layout":"scroll",class:"p-datatable-sm p-datatable-no-wrap","select-all":w.value,onPage:u[3]||(u[3]=e=>ue(e)),onSort:u[4]||(u[4]=e=>ie(e)),onFilter:u[5]||(u[5]=e=>de()),onSelectAllChange:pe,onRowSelect:re,onRowUnselect:ce},{header:n(()=>[i("div",Be,[i("span",Fe,[i("h5",Oe,c(F.value),1),l(b,{label:"New",icon:"pi pi-plus",class:"p-button-success ml-2 mr-2 p-button-sm",onClick:me}),l(b,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger p-button-sm",disabled:!m.value||!m.value.length,onClick:ye},null,8,["disabled"]),l(b,{type:"button",label:"Sync",icon:"pi pi-sync",loading:N.value,class:"p-button-sm p-button-info ml-3",onClick:le},null,8,["loading"])]),i("span",Te,[i("span",Ie,[Ye,l(C,{modelValue:x.value.global.value,"onUpdate:modelValue":u[0]||(u[0]=e=>x.value.global.value=e),class:"p-inputtext-sm",placeholder:"Search..."},null,8,["modelValue"])]),l(b,{type:"button",icon:"pi pi-refresh",class:"p-button-sm p-button-success p-button-rounded",onClick:y})])])]),default:n(()=>[l(v,{"selection-mode":"multiple",style:{width:"3rem"},exportable:!1}),l(v,{field:"username",header:"Username",sortable:!0},{filter:n(({filterModel:e,filterCallback:d})=>[l(C,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,type:"text",class:"p-column-filter p-inputtext-sm",placeholder:"Search by no",onKeydown:M(t=>d(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),l(v,{field:"name",header:"Name",sortable:!0},{filter:n(({filterModel:e,filterCallback:d})=>[l(C,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,type:"text",class:"p-column-filter p-inputtext-sm",placeholder:"Search by no",onKeydown:M(t=>d(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),l(v,{field:"company",header:"Company",sortable:!0},{filter:n(({filterModel:e,filterCallback:d})=>[l(D,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:Y.value,filter:!0,placeholder:"Any","option-label":"name",class:"p-column-filter p-inputtext-sm","show-clear":!0,onChange:t=>d()},{value:n(t=>[t.value?(r(),p("span",{key:0,class:k("customer-badge status-"+t.value)},c(t.value),3)):(r(),p("span",je,c(t.placeholder),1))]),option:n(t=>[i("span",{class:k("customer-badge status-"+t.option)},c(t.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),l(v,{field:"department",header:"Department",sortable:!0},{filter:n(({filterModel:e,filterCallback:d})=>[l(D,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:I.value,filter:!0,placeholder:"Any","option-label":"name",class:"p-column-filter p-inputtext-sm","show-clear":!0,onChange:t=>d()},{value:n(t=>[t.value?(r(),p("span",{key:0,class:k("customer-badge status-"+t.value)},c(t.value),3)):(r(),p("span",Je,c(t.placeholder),1))]),option:n(t=>[i("span",{class:k("customer-badge status-"+t.option)},c(t.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),l(v,{field:"email",header:"Email",sortable:!0},{filter:n(({filterModel:e,filterCallback:d})=>[l(C,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,type:"text",class:"p-column-filter p-inputtext-sm",placeholder:"Search by no",onKeydown:M(t=>d(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),l(v,{field:"role_name",header:"Role",sortable:!1},{body:n(e=>[(r(!0),p(xe,null,Ce(e.data.role_name,d=>(r(),B(be,{key:d,label:d,class:"mr-2 mb-2"},null,8,["label"]))),128))]),filter:n(({filterModel:e,filterCallback:d})=>[l(D,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:T.value,placeholder:"Any","option-label":"name",class:"p-column-filter p-inputtext-sm","show-clear":!0,onChange:t=>d()},{value:n(t=>[t.value?(r(),p("span",{key:0,class:k("customer-badge status-"+t.value)},c(t.value),3)):(r(),p("span",We,c(t.placeholder),1))]),option:n(t=>[i("span",{class:k("customer-badge status-"+t.option)},c(t.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),l(v,{field:"active",header:"Status",sortable:!0},{body:n(e=>[e.data.active==="Y"?(r(),B(q,{key:0,class:"mr-2",severity:"success",value:"Active"})):(r(),B(q,{key:1,class:"mr-2",severity:"danger",value:"Not Active"}))]),filter:n(({filterModel:e,filterCallback:d})=>[l(C,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,type:"text",class:"p-column-filter p-inputtext-sm",placeholder:"Search by no",onKeydown:M(t=>d(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),l(v,{exportable:!1,style:{"min-width":"8rem"}},{body:n(e=>[l(_e,{label:"Edit",icon:"pi pi-pencil",model:te(e.data),class:"p-button-sm p-button-success",onClick:d=>W(e.data)},null,8,["model","onClick"])]),_:1})]),_:1},8,["filters","selection","value","total-records","loading","select-all"])]),l(z,{visible:U.value,"onUpdate:visible":u[9]||(u[9]=e=>U.value=e),style:{width:"600px"},header:R.value+F.value,modal:!0,class:"p-fluid"},{footer:n(()=>[l(b,{label:"Save",icon:"pi pi-check",class:"p-button-sm p-button-success",loading:g.value,onClick:fe},null,8,["loading"])]),default:n(()=>[i("div",He,[qe,l(D,{id:"inventoryStatus",modelValue:o.value.employee,"onUpdate:modelValue":u[6]||(u[6]=e=>o.value.employee=e),options:O.value,"option-label":"NameNik",placeholder:"Select a Status",filter:!0,"virtual-scroller-options":{itemSize:50},class:"p-inputtext-sm",onChange:J},{value:n(e=>[e.value?(r(),p("span",Ge,c(e.value.NameNik),1)):(r(),p("span",Xe,c(e.placeholder),1))]),_:1},8,["modelValue","options"])]),i("div",Ze,[Pe,l(ke,{id:"role",modelValue:o.value.role,"onUpdate:modelValue":u[7]||(u[7]=e=>o.value.role=e),options:j.value,"option-label":"name","option-value":"id",display:"chip",placeholder:"Select a Status",filter:!0,class:"p-inputtext-sm",onChange:J},null,8,["modelValue","options"])]),i("div",ea,[aa,l(D,{id:"inventoryStatus",modelValue:o.value.active,"onUpdate:modelValue":u[8]||(u[8]=e=>o.value.active=e),options:ae.value,"option-label":"label","option-value":"value",placeholder:"Select a Status",class:"p-inputtext-sm"},{value:n(e=>[e.value?(r(),p("span",ta,c(e.value),1)):(r(),p("span",la,c(e.placeholder),1))]),_:1},8,["modelValue","options"])])]),_:1},8,["visible","header"]),l(z,{visible:E.value,"onUpdate:visible":u[10]||(u[10]=e=>E.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(b,{label:"Yes",icon:"pi pi-check",class:"p-button-sm p-button-success",onClick:H})]),default:n(()=>[i("div",oa,[sa,o.value?(r(),p("span",na,[G("Are you sure you want to delete "),i("b",null,c(o.value.name),1),G("?")])):X("",!0)])]),_:1},8,["visible"]),l(z,{visible:L.value,"onUpdate:visible":u[11]||(u[11]=e=>L.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(b,{label:"Yes",icon:"pi pi-check",class:"p-button-sm p-button-success",onClick:H})]),default:n(()=>[i("div",ua,[ia,o.value?(r(),p("span",da,"Are you sure you want to delete the selected data?")):X("",!0)])]),_:1},8,["visible"])])}}});export{Ra as default};
